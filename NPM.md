# NPM #
All distributed or consumed artifacts that with private or restricted source tracking will be deployed through NPM. This will ensure that every environment that will consume or otherwise require access to the artifact will be able to retrieve it in a clear and consistent way.

## Publishing Process ##
By the nature of our development process, the addition of a publish step that also includes a degree of version control introduces complexity. Thus, when a new version of an artifact is required, please follow this process exactly:

1. `git checkout development` then `git pull`
2. `git checkout master`
3. `git merge development` and ensure itâ€™s fast-forward
4. `npm version patch`
5. `git push origin master` then `git push origin (tag)` (specifically like `git push origin v0.20.4`)
6. run webpack
7. `npm publish`
8. `git checkout development`
9. `git rebase development`
10. `git push development`

## Shrinkwrap ##
This process locks down the entire dependency tree for an artifact. We use this a version change in a dependent package can go unnoticed in any environment that caches node_modules, specifically our local environments and the CI environments. This behavior can pass all tests while introducing a functional defect in production. The worst case scenario, is a production instance restarts and retrieves a new version of a dependency that then introduces a functional defect.

These defects can be extremely difficult to isolate or even validate that this behavior is the cause.

For this reason we apply a shrinkwrap to all of our 'end products'. The rule of thumb here is that an 'end product' is any product that is deployed and intended to be directly consumed by customers or integrated systems.

### Process ###
At it's most simple, a shrinkwrap file can be generated by running `npm shrinkwrap`.

When the process fails and reports 'extraneous' packages, try running `npm prune`.
